<%! io.github.landgrafhomyak.chatwars.wiki.User %>
<%@ title: String %>
<%@ user: User %>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><%= title %></title>
    <link rel="stylesheet" href="/common.css">
</head>
<body>
<div class="navbar">
    <img class="logo" src="/logo.svg">
    <a href="/">На главную</a>
    <a href="https://telegram.me/chtwrsbot?start=75ad693c5cea4021b2a275847887f8f2">Чат</a>
    <a href="/login">Войти</a>
    <a href="/random">Случайная страница</a>
    <hr>
    <a href="/last_edits">Последние изменения</a>
    <a href="/unchecked_edits">Непроверенные изменения</a>
</div>
<div class="header">
    <div class="account">
        <%=
            when(user) {
                is User.Anonymous -> "<a href='/login'>Войти</a>"
                is User.SessionExpired -> """
                    <b style="color: darkred">Ваша сессия истекла!</b>
                    <a href="#">Ок</a>
                    <a href="/login">Войти ещё раз</a>
                    <div class="sep"></div>
                    <a href='/user/${user.name}'><s>${user.name}</s></a>
                    <div class="sep"></div>
                    <a href='/user/${user.name}?contribution'>Вклад</a>
                """
                is User.Authorized -> """
                    <a href='/user/${user.name}'>${user.name}</a>
                    <div class="sep"></div>
                    <a href='/user/${user.name}?contribution'>Вклад</a>
                    <a href='/logout'>Выйти</a>
                """
            }
        %>
    </div>
    <div class="tabs">
        <div class="tab selected">
            <a href="?">Статья</a>
        </div>
        <div class="tab join-left">
            <a href="?fix">Предложить исправление</a>
        </div>
        <div class="space"></div>
        <div class="tab join-right selected">
            <a href="?">Читать</a>
        </div>
        <div class="tab join-right">
            <a href="?history">История</a>
        </div>
        <div class="tab">
            <%=
                when(user) {
                    is User.Authorized -> "<a href='?edit'>Редактировать</a>"
                    else -> "<a href='?source'>Исходный код</a>"
                }
            %>
        </div>
        <div class="space-tab">

        </div>
    </div>
</div>
<div class="body"></div>
<div class="footer"></div>
</body>
</html>